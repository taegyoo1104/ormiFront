<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/hodu2.css">
    <title>KAWAI HODU</title>
</head>
<body>

<div id="top-background">
    <div id="top-navigation-bar">
        <!-- top-navigation-bar-->
        <div id="top_nav_element">
            <a href="#" class="top_nav_link">Home</a>
            <a href="#" class="top_nav_link" style="margin-left: 30px;">About</a>
            <a href="#" class="top_nav_link" style="margin-left: 30px;">Support</a>
        </div>
        <button class="download_btn" type="button">
            <img id="download_btn_1" src="img/Download_btn.jpg" alt="download">
        </button>
    </div>
    <img id="logo" src="img/Logo-fin.png" alt="Logo">
    <div id="main_text">Lorem Ipsum is simply<br>dummy text of the printing and</div>
    <div id="sub_text">
        Lorem Ipsum is simply dummy text of the printing and<br>
        typesetting industry.<br>
        Lorem Ipsum has been the industry's standard dummy text<br>
        ever since the 1500s, when an unknown
    </div>
    <button class="download_btn" type="button">
        <img id="download_btn_2" src="img/Download_btn.jpg" alt="download">
    </button>
    <img id="cat_in_the_box" src="img/img_cat_png.png" alt="Cat_in_the_box">
</div>

<img id="cat_on_the_bed" src="img/cat_on_the_bed.png" alt="Cat_on_the_bed">
<div id="mid_text_1">Lorem Ipsum is simply<br>
    dummy text of the printing<br>
    and dummy text</div>
<div id="mid_text_2">Lorem Ipsum is simply dummy text of the printing<br>
    and typesetting industry.</div>
<div class="image-list-area">
    <div id="customText2">dummy text of the printing and dummy</div>
    <div id="customText3">Lorem Ipsum is simply <span style="color: #D97652">dummy text</span> of the printing and typesetting industry.<br>
        Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown</div>

    <div id="imageList">
        <div>
            <img class="imageItem" src="img/img_1.png" alt="Image 1">
            <img class="imageItem" src="img/img_2.png" alt="Image 2">
            <img class="imageItem" src="img/img_3.png" alt="Image 3">
        </div>
        <div>
            <img class="imageItem" src="img/img_4.png" alt="Image 4">
            <img class="imageItem" src="img/img_5.png" alt="Image 5">
            <img class="imageItem" src="img/img_6.png" alt="Image 6">
        </div>
        <div id="infinite">

        </div>
    </div>
    <div id="frame">
        <div id="frame-text">Continue exploring HODU</div>
        <button class="learn_more_btn" id="load-more-btn" type="button" onclick="fetchImages()">
            <img id="learn_more_btn" src="img/Learn_More_btn.png" alt="show_more">
        </button>

    </div>
    <script>
        const frame = document.getElementById('frame');
        const imageList = document.querySelector("#infinite");
        let pageToFetch = 1;
        let totalImagesLoaded = 0;
        const totalImagesToLoad = 30; // 총 로드할 이미지 수

        // 버튼 클릭 이벤트에 대한 리스너 추가
        document.getElementById('loadMore').addEventListener('click', function() {
            if (totalImagesLoaded < totalImagesToLoad) {
                fetchImages(pageToFetch++);
                window.addEventListener('scroll', handleScroll);
            } else {
                console.log('이미지를 모두 로드했습니다.');
                frame.style.display = 'none';
                window.removeEventListener('scroll', handleScroll);
            }
        });

        async function fetchImages(pageNum) {
            try {
                const response = await fetch('https://picsum.photos/v2/list?page=' + pageNum + '&limit=10');
                if (!response.ok) {
                    throw new Error('네트워크 응답에 문제가 있습니다.');
                }

                const datas = await response.json();
                frame.style.display = 'none';


                if (datas.length === 0 || totalImagesLoaded >= totalImagesToLoad) {
                    loadMoreButton.style.display = 'none';
                    frame.style.display = 'none';
                    window.removeEventListener('scroll', handleScroll); // 무한 스크롤 중지
                    return;
                }

                totalImagesLoaded += datas.length;
                makeImageList(datas);
            } catch (error) {
                console.error('데이터를 가져오는데 문제가 발생했습니다 :', error);
            }
        }

        function makeImageList(datas) {
            // 이미지를 3장씩 포함하는 div를 생성
            for (let i = 0; i < datas.length; i += 3) {
                const imageDiv = document.createElement('div');

                // 각 이미지마다 새로운 img 요소를 생성하고 div에 추가
                for (let j = i; j < i + 3 && j < datas.length; j++) {
                    const imgElement = document.createElement('img');
                    imgElement.src = datas[j].download_url;
                    imgElement.alt = '';
                    imgElement.style.width = '378px';
                    imgElement.style.height = '378px';
                    imageDiv.appendChild(imgElement);

                    // 이미지 간격을 위한 스타일 설정
                    if (j < i + 2 && j < datas.length - 1) {
                        const gapElement = document.createElement('div');
                        gapElement.style.width = '72px';
                        imageDiv.appendChild(gapElement);
                    }
                }
                // 이미지를 포함한 div를 imageList에 추가
                imageList.appendChild(imageDiv);
            }
        }
        function handleScroll() {
            if (window.innerHeight + document.documentElement.scrollTop + 10 >= document.documentElement.offsetHeight) {
                fetchImages(pageToFetch++);
            }
        }
    </script>
    <img id="line" src="img/Rectangle_4.png">
</div>

<div class="map">
    <div class="map-main-text">Where you’ll be</div>
    <div class="map-address-text">330, Cheomdan-ro, Jeju-si, Jeju-do, Republic of Korea</div>

    <div id="map"></div>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=927c2d760eca19fa4ada04e224add081"></script>
    <script>
        var mapContainer = document.getElementById('map'), // 지도를 표시할 div
            mapOption = {
                center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
                level: 3 // 지도의 확대 레벨
            };

        var map = new kakao.maps.Map(mapContainer, mapOption);
    </script>
</div>
<div class="subscribe">
    <img class="sub-text" src="img/Sub-text-Group.png">
    <input class="email" type="text">
    <button type="button">
        <img class="sub-btn" src="img/sub.png" alt="" onclick="openModal()">
    </button>
</div>
<div id="myModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>

        <div class="modal-image" style="background-image: url('img/modal_back.png');">
            <img src="img/modal_cat.png" alt="Cat Image" width="110" height="112">
            <img src="img/modal_ty.png" alt="Ty Image">
            <img src="img/modal_text.png" alt="Text Image">
            <button type="button">
                <img src="img/modal_close_btn.png" alt="Button Image" onclick="closeModal()">
            </button>
        </div>
    </div>
</div>

<script>
    function openModal() {
        var modal = document.getElementById('myModal');
        modal.style.display = 'block';
    }

    function closeModal() {
        var modal = document.getElementById('myModal');
        modal.style.display = 'none';
    }
</script>
<img id="cat" src="img/cat.png">

<div class="footer">
    <img id="footer-logo" src="img/Logo-fin.png">
    <img id="footer-icon-group" src="img/footer-icon-group.png">
</div>

</body>
</html>